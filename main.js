!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-btn",inactiveButtonClass:"modal__save-btn_disabled",errorClass:"modal__error_shown",inputErrorClass:"modal__input_error"},t=(e,t,o)=>{(e=>e.some((e=>!e.validity.valid)))(e)?((e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)})(t,o):((e,t)=>{e.disabled=!1,e.classList.remove(t.inactiveButtonClass)})(t,o)},o=document.querySelector(".profile__edit-button"),n=document.querySelector(".profile__post-button"),r=document.querySelector("#new-post-modal"),a=r.querySelector(".modal__close-button"),s=document.querySelector("#edit-modal"),c=(s.querySelector(".modal__save-btn"),s.querySelector(".modal__close-button")),l=document.forms["edit-profile"],i=document.forms["new-post"],d=i.querySelector("#image-link-input"),u=i.querySelector("#caption-input"),m=s.querySelector("#name-input"),p=s.querySelector("#description-input"),_=document.querySelector(".profile__name"),v=document.querySelector(".profile__description"),y=document.querySelector("#card").content,f=document.querySelector(".cards__list"),S=document.querySelector("#preview-modal"),q=r.querySelector(".modal__save-btn"),b=S.querySelector(".modal__image"),h=S.querySelector(".modal__title-preview"),k=S.querySelector(".modal__close-button");function w(e){"Escape"===e.key&&L(document.querySelector(".modal_opened"))}function g(e){e.classList.add("modal_opened"),document.addEventListener("keydown",w)}function L(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",w)}function E(e){const t=y.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__image"),n=t.querySelector(".card__title");o.src=e.link,o.alt=e.name,n.textContent=e.name,o.addEventListener("click",(()=>{g(S),b.src=o.src,b.alt=n.textContent,h.textContent=n.textContent}));const r=t.querySelector(".card__like-button"),a=t.querySelector(".card__delete-button");return r.addEventListener("click",(()=>{r.classList.toggle("card__like-button_liked")})),a.addEventListener("click",(()=>{t.remove()})),t}var C;document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("click",(function(t){t.target.classList.contains("modal")&&L(e)}))})),o.addEventListener("click",(e=>{g(s),m.value=_.textContent,p.value=v.textContent,resetValidation(l,[p,m])})),n.addEventListener("click",(e=>{g(r)})),a.addEventListener("click",(e=>{L(r)})),c.addEventListener("click",(e=>{L(s)})),l.addEventListener("submit",(function(e){e.preventDefault(),_.textContent=m.value,v.textContent=p.value,L(s)})),[{name:"Adorable puppy",link:"https://www.petlandflorida.com/wp-content/uploads/2022/04/shutterstock_1290320698-1-scaled.jpg"},{name:"Art of Bonsai",link:"https://centredejardinbrossard.com/wp-content/uploads/2021/10/bonsai.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach((e=>{const t=E(e);f.append(t)})),k.addEventListener("click",(()=>{L(S)})),i.addEventListener("submit",(function(t){t.preventDefault();const o=E({name:u.value,link:d.value});f.prepend(o),i.reset(),disableButton(q,e),L(r)})),C=e,document.querySelectorAll(C.formSelector).forEach((e=>{((e,o)=>{const n=Array.from(e.querySelectorAll(o.inputSelector)),r=e.querySelector(o.submitButtonSelector);t(n,r,o),n.forEach((a=>{a.addEventListener("input",(function(){((e,t,o)=>{t.validity.valid?((e,t,o)=>{const n=t.id+"-error",r=e.querySelector("#"+n);r.classList.remove(o.errorClass),r.textContent="",t.classList.remove(o.inputErrorClass)})(e,t,o):((e,t,o)=>{const n=t.id+"-error",r=e.querySelector("#"+n);r.classList.add(o.errorClass),r.textContent=t.validationMessage,t.classList.add(o.inputErrorClass)})(e,t,o)})(e,a,o),t(n,r,o)}))}))})(e,C)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cm9qZWN0X3Nwb3RzLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ0blwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnRuX2Rpc2FibGVkXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3Jfc2hvd25cIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X2Vycm9yXCIsXHJcbn07XHJcblxyXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcclxuICBjb25zdCBlcnJvck1lc3NhZ2VJRCA9IGlucHV0RWxlbWVudC5pZCArIFwiLWVycm9yXCI7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIiArIGVycm9yTWVzc2FnZUlEKTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuZXJyb3JDbGFzcyk7XHJcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG59O1xyXG5cclxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZXJyb3JNZXNzYWdlSUQgPSBpbnB1dEVsZW1lbnQuaWQgKyBcIi1lcnJvclwiO1xyXG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBlcnJvck1lc3NhZ2VJRCk7XHJcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbn07XHJcblxyXG5jb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsZW1lbnQsIGlucHV0TGlzdCkgPT4ge1xyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIHNldHRpbmdzKTtcclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcclxuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XHJcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dCkgPT4ge1xyXG4gICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IGRpc2FibGVCdXR0b24gPSAoYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxufTtcclxuXHJcbmNvbnN0IGVuYWJsZUJ1dHRvbiA9IChidXR0b25FbGVtZW50LCBjb25maWcpID0+IHtcclxuICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxufTtcclxuXHJcbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGVuYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbGVtZW50LCBjb25maWcpID0+IHtcclxuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcilcclxuICApO1xyXG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcclxuXHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xyXG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKTtcclxuXHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBjb25maWcpO1xyXG4gIH0pO1xyXG59O1xyXG4iLCJpbXBvcnQgeyBlbmFibGVWYWxpZGF0aW9uLCBzZXR0aW5ncyB9IGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcclxuaW1wb3J0IFwiLi9zdHlsZS5jc3NcIjtcclxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiQWRvcmFibGUgcHVwcHlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly93d3cucGV0bGFuZGZsb3JpZGEuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDIyLzA0L3NodXR0ZXJzdG9ja18xMjkwMzIwNjk4LTEtc2NhbGVkLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJBcnQgb2YgQm9uc2FpXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY2VudHJlZGVqYXJkaW5icm9zc2FyZC5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMjEvMTAvYm9uc2FpLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJBbiBvdXRkb29yIGNhZmVcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8zLXBob3RvLWJ5LXR1YmFudXItZG9nYW4tZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkEgdmVyeSBsb25nIGJyaWRnZSwgb3ZlciB0aGUgZm9yZXN0IGFuZCB0aHJvdWdoIHRoZSB0cmVlc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzQtcGhvdG8tYnktbWF1cmljZS1sYXNjaGV0LWZyb20tcGV4ZWxzLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJUdW5uZWwgd2l0aCBtb3JuaW5nIGxpZ2h0XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNS1waG90by1ieS12YW4tYW5oLW5ndXllbi1mcm9tLXBleGVscy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTW91bnRhaW4gaG91c2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy82LXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBuZXdQb3N0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19wb3N0LWJ1dHRvblwiKTtcclxuXHJcbmNvbnN0IG5ld1Bvc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LXBvc3QtbW9kYWxcIik7XHJcbmNvbnN0IG5ld1Bvc3RDbG9zZWJ1dHRvbiA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XHJcbmNvbnN0IHByb2ZpbGVTYXZlQnV0dG9uID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ0blwiKTtcclxuY29uc3QgZWRpdE1vZGFsQ2xvc2VCdXR0b24gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXHJcbik7XHJcbmNvbnN0IHByb2ZpbGVNb2RhbEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImVkaXQtcHJvZmlsZVwiXTtcclxuY29uc3QgbmV3UG9zdE1vZGFsRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wibmV3LXBvc3RcIl07XHJcbmNvbnN0IGlucHV0TGluayA9IG5ld1Bvc3RNb2RhbEZvcm0ucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1saW5rLWlucHV0XCIpO1xyXG5jb25zdCBpbnB1dENhcHRpb24gPSBuZXdQb3N0TW9kYWxGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjY2FwdGlvbi1pbnB1dFwiKTtcclxuY29uc3QgaW5wdXROYW1lID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI25hbWUtaW5wdXRcIik7XHJcbmNvbnN0IGlucHV0Sm9iID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uLWlucHV0XCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVKb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkXCIpLmNvbnRlbnQ7XHJcbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcclxuY29uc3QgY2FyZFN1Ym1pdEJ1dHRvbiA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ0blwiKTtcclxuXHJcbmNvbnN0IHByZXZpZXdNb2RhbEltYWdlID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xyXG5jb25zdCBwcmV2aWV3TW9kYWxUaXRsZSA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX190aXRsZS1wcmV2aWV3XCIpO1xyXG5cclxuY29uc3QgcHJldmlld01vZGFsQ2xvc2VCdXR0b24gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCJcclxuKTtcclxuXHJcbmNvbnN0IG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIik7XHJcblxyXG5tb2RhbHMuZm9yRWFjaCgobW9kYWwpID0+IHtcclxuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpKSB7XHJcbiAgICAgIGNsb3NlTW9kYWwobW9kYWwpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUVzY2FwZShldnQpIHtcclxuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgY29uc3Qgb3Blbk1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XHJcbiAgICBjbG9zZU1vZGFsKG9wZW5Nb2RhbCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcclxuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcclxuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZSk7XHJcbn1cclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAobW9kYWwpID0+IHtcclxuICBvcGVuTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XHJcblxyXG4gIGlucHV0TmFtZS52YWx1ZSA9IHByb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudDtcclxuICBpbnB1dEpvYi52YWx1ZSA9IHByb2ZpbGVKb2JFbGVtZW50LnRleHRDb250ZW50O1xyXG4gIHJlc2V0VmFsaWRhdGlvbihwcm9maWxlTW9kYWxGb3JtLCBbaW5wdXRKb2IsIGlucHV0TmFtZV0pO1xyXG59KTtcclxuXHJcbm5ld1Bvc3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChtb2RhbCkgPT4ge1xyXG4gIG9wZW5Nb2RhbChuZXdQb3N0TW9kYWwpO1xyXG59KTtcclxuXHJcbm5ld1Bvc3RDbG9zZWJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKG1vZGFsKSA9PiB7XHJcbiAgY2xvc2VNb2RhbChuZXdQb3N0TW9kYWwpO1xyXG59KTtcclxuXHJcbmVkaXRNb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAobW9kYWwpID0+IHtcclxuICBjbG9zZU1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHByb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0TmFtZS52YWx1ZTtcclxuICBwcm9maWxlSm9iRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0Sm9iLnZhbHVlO1xyXG4gIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU5ld1Bvc3RGb3JtU3VibWl0KGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IGlucHV0VmFsdWVzID0geyBuYW1lOiBpbnB1dENhcHRpb24udmFsdWUsIGxpbms6IGlucHV0TGluay52YWx1ZSB9O1xyXG4gIGNvbnN0IGNhcmQgPSBnZXRDYXJkRWxlbWVudChpbnB1dFZhbHVlcyk7XHJcbiAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZCk7XHJcbiAgbmV3UG9zdE1vZGFsRm9ybS5yZXNldCgpO1xyXG4gIGRpc2FibGVCdXR0b24oY2FyZFN1Ym1pdEJ1dHRvbiwgc2V0dGluZ3MpO1xyXG4gIGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKTtcclxufVxyXG5cclxucHJvZmlsZU1vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcclxuXHJcbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIikuY2xvbmVOb2RlKHRydWUpO1xyXG4gIGNvbnN0IGNhcmRJbWFnZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgY29uc3QgY2FyZENvbnRlbnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gIGNhcmRJbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgY2FyZEltYWdlLmFsdCA9IGRhdGEubmFtZTtcclxuICBjYXJkQ29udGVudC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuXHJcbiAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBvcGVuTW9kYWwocHJldmlld01vZGFsKTtcclxuICAgIHByZXZpZXdNb2RhbEltYWdlLnNyYyA9IGNhcmRJbWFnZS5zcmM7XHJcbiAgICBwcmV2aWV3TW9kYWxJbWFnZS5hbHQgPSBjYXJkQ29udGVudC50ZXh0Q29udGVudDtcclxuICAgIHByZXZpZXdNb2RhbFRpdGxlLnRleHRDb250ZW50ID0gY2FyZENvbnRlbnQudGV4dENvbnRlbnQ7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGNhcmRMaWtlRWxlbWVudCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgY29uc3QgY2FyZERlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcclxuXHJcbiAgY2FyZExpa2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBjYXJkTGlrZUVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2xpa2VkXCIpO1xyXG4gIH0pO1xyXG5cclxuICBjYXJkRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG5pbml0aWFsQ2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBnZXRDYXJkRWxlbWVudChpdGVtKTtcclxuICBjYXJkc0xpc3QuYXBwZW5kKGNhcmQpO1xyXG59KTtcclxuXHJcbnByZXZpZXdNb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY2xvc2VNb2RhbChwcmV2aWV3TW9kYWwpO1xyXG59KTtcclxuXHJcbm5ld1Bvc3RNb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVOZXdQb3N0Rm9ybVN1Ym1pdCk7XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcclxuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsZW1lbnQiLCJjb25maWciLCJzb21lIiwiaW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiY2xhc3NMaXN0IiwiYWRkIiwiZW5hYmxlQnV0dG9uIiwicmVtb3ZlIiwicHJvZmlsZUVkaXRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJuZXdQb3N0QnV0dG9uIiwibmV3UG9zdE1vZGFsIiwibmV3UG9zdENsb3NlYnV0dG9uIiwiZWRpdFByb2ZpbGVNb2RhbCIsImVkaXRNb2RhbENsb3NlQnV0dG9uIiwicHJvZmlsZU1vZGFsRm9ybSIsImZvcm1zIiwibmV3UG9zdE1vZGFsRm9ybSIsImlucHV0TGluayIsImlucHV0Q2FwdGlvbiIsImlucHV0TmFtZSIsImlucHV0Sm9iIiwicHJvZmlsZU5hbWVFbGVtZW50IiwicHJvZmlsZUpvYkVsZW1lbnQiLCJjYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiY2FyZHNMaXN0IiwicHJldmlld01vZGFsIiwiY2FyZFN1Ym1pdEJ1dHRvbiIsInByZXZpZXdNb2RhbEltYWdlIiwicHJldmlld01vZGFsVGl0bGUiLCJwcmV2aWV3TW9kYWxDbG9zZUJ1dHRvbiIsImhhbmRsZUVzY2FwZSIsImV2dCIsImtleSIsImNsb3NlTW9kYWwiLCJvcGVuTW9kYWwiLCJtb2RhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0Q2FyZEVsZW1lbnQiLCJkYXRhIiwiY2FyZEVsZW1lbnQiLCJjbG9uZU5vZGUiLCJjYXJkSW1hZ2UiLCJjYXJkQ29udGVudCIsInNyYyIsImxpbmsiLCJhbHQiLCJuYW1lIiwidGV4dENvbnRlbnQiLCJjYXJkTGlrZUVsZW1lbnQiLCJjYXJkRGVsZXRlQnV0dG9uIiwidG9nZ2xlIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJldmVudCIsInRhcmdldCIsImNvbnRhaW5zIiwidmFsdWUiLCJyZXNldFZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIml0ZW0iLCJjYXJkIiwiYXBwZW5kIiwicHJlcGVuZCIsInJlc2V0IiwiZm9ybUVsZW1lbnQiLCJzZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsImlucHV0RWxlbWVudCIsImNoZWNrSW5wdXRWYWxpZGl0eSIsImhpZGVJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlSUQiLCJpZCIsImVycm9yRWxlbWVudCIsInNob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9